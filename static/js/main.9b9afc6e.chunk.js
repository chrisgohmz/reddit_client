(this.webpackJsonpreddit_client=this.webpackJsonpreddit_client||[]).push([[0],{15:function(e,t,c){"use strict";(function(e){c.d(t,"a",(function(){return o})),c.d(t,"d",(function(){return d})),c.d(t,"c",(function(){return j})),c.d(t,"b",(function(){return l}));var n=c(26),s=c(31),a=c(7),r=c(30),i=c.n(r);e.globalThis.fetch||(e.globalThis.fetch=i.a);var o=Object(s.a)({reducerPath:"redditApi",baseQuery:Object(a.d)({baseUrl:"https://www.reddit.com"}),endpoints:function(e){return{getSubreddits:e.query({query:function(){return"/subreddits.json"},transformResponse:function(e){return e.data.children.map((function(e){return e.data}))}}),getPosts:e.query({query:function(e){return"".concat(e,".json")},transformResponse:function(e){return e.data.children.map((function(e){return Object(n.a)(Object(n.a)({},e.data),{},{showingComments:!1})}))}}),getComments:e.query({query:function(e){return"".concat(e,".json")},transformResponse:function(e){return e[1].data.children.map((function(e){return e.data}))}})}}}),d=o.useGetSubredditsQuery,j=o.useGetPostsQuery,l=o.useGetCommentsQuery}).call(this,c(46))},28:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){},49:function(e,t,c){},50:function(e,t,c){},55:function(e,t,c){},56:function(e,t,c){},57:function(e,t,c){},58:function(e,t,c){},59:function(e,t,c){},60:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(14),r=c.n(a),i=(c(41),c(42),c(34)),o=c(6),d=c(4),j=Object(d.d)({name:"reddit",initialState:{posts:[],searchTerm:"",currentSubreddit:"/r/Home"},reducers:{setPosts:function(e,t){e.posts=t.payload},setSearchTerm:function(e,t){e.searchTerm=t.payload},setCurrentSubreddit:function(e,t){e.currentSubreddit=t.payload,e.searchTerm=""},toggleShowingComments:function(e,t){e.posts[t.payload].showingComments=!e.posts[t.payload].showingComments}}}),l=function(e){return e.reddit.searchTerm},u=function(e){return e.reddit.currentSubreddit},b=j.actions,m=b.setPosts,h=b.setSearchTerm,O=b.setCurrentSubreddit,x=b.toggleShowingComments,p=j.reducer,f=c(15),v=c(23),N=c(16),g=c(22),w=c.n(g),y=(c(49),c(50),c(2)),S=function(e){var t=e.name;return Object(y.jsx)("img",{src:"https://api.adorable.io/avatars/10/".concat(t),alt:"".concat(t," profile"),className:"avatar-profile-image"})},C=c(10),k=c.n(C),_=function(e){var t=e.permalink,c=Object(f.b)(t),n=c.data,s=c.error,a=c.isLoading;return s?Object(y.jsx)("div",{children:Object(y.jsx)("h3",{children:"Error loading comments"})}):a?Object(y.jsxs)("div",{children:[Object(y.jsx)(k.a,{}),Object(y.jsx)(k.a,{}),Object(y.jsx)(k.a,{}),Object(y.jsx)(k.a,{})]}):n.map((function(e){return Object(y.jsxs)("div",{className:"comment",children:[Object(y.jsxs)("div",{className:"comment-metadata",children:[Object(y.jsx)(S,{name:e.author}),Object(y.jsx)("p",{className:"comment-author",children:e.author}),Object(y.jsx)("p",{className:"comment-created-time",children:w.a.unix(e.created_utc).fromNow()})]}),e.body]})}))},T=(c(55),function(e){return Object(y.jsx)("div",{className:"card ".concat(e.className),children:e.children})}),P=function(e,t){for(var c=["k","M","G","T","P","E","Z","Y"],n=c.length-1;n>=0;n-=1){var s=Math.pow(1e3,n+1);if(e<=-s||e>=s)return+(e/s).toFixed(t)+c[n]}return e},q=(c(28),function(e){var t=e.post,c=e.index,s=Object(n.useState)(0),a=Object(v.a)(s,2),r=a[0],i=a[1],d=Object(o.e)((function(e){return e.reddit.posts[c].showingComments})),j=Object(o.d)(),l=function(e){i(e===r?0:1===e?1:-1)};return Object(y.jsx)("article",{children:Object(y.jsx)(T,{children:Object(y.jsxs)("div",{className:"post-wrapper",children:[Object(y.jsxs)("div",{className:"post-votes-container",children:[Object(y.jsx)("button",{type:"button",className:"icon-action-button up-vote ".concat(1===r&&"active"),onClick:function(){return l(1)},"aria-label":"Up vote",children:1===r?Object(y.jsx)(N.d,{className:"icon-action"}):Object(y.jsx)(N.c,{className:"icon-action"})}),Object(y.jsx)("p",{className:"post-votes-value ".concat(1===r?"up-vote":-1===r?"down-vote":""),children:P(t.ups,1)}),Object(y.jsx)("button",{type:"button",className:"icon-action-button down-vote ".concat(-1===r&&"active"),onClick:function(){return l(-1)},"aria-label":"Down vote",children:-1===r?Object(y.jsx)(N.b,{className:"icon-action"}):Object(y.jsx)(N.a,{className:"icon-action"})})]}),Object(y.jsxs)("div",{className:"post-container",children:[Object(y.jsx)("h3",{className:"post-title",children:t.title}),Object(y.jsx)("div",{className:"post-image-container",children:Object(y.jsx)("img",{src:t.url,alt:"",className:"post-image"})}),Object(y.jsxs)("div",{className:"post-details",children:[Object(y.jsxs)("span",{className:"author-details",children:[Object(y.jsx)(S,{name:t.author}),Object(y.jsx)("span",{className:"author-username",children:t.author})]}),Object(y.jsx)("span",{children:w.a.unix(t.created_utc).fromNow()}),Object(y.jsxs)("span",{className:"post-comments-container",children:[Object(y.jsx)("button",{type:"button",className:"icon-action-button ".concat(d&&"showing-comments"),onClick:function(){return function(e){j(x(e))}(c)},"aria-label":"Show comments",children:Object(y.jsx)(N.e,{className:"icon-action"})}),P(t.num_comments,1)]})]}),d?Object(y.jsx)("div",{children:Object(y.jsx)(_,{permalink:t.permalink})}):null]})]})})},t.id)}),L=(c(56),function(e,t){return Math.floor(Math.random()*t)+e}),M=(c(57),function(){return Object(y.jsxs)("article",{className:"post",children:[Object(y.jsxs)("div",{className:"post-votes-container",children:[Object(y.jsx)("button",{type:"button",className:"icon-action-button up-vote","aria-label":"Up vote",children:Object(y.jsx)(N.c,{className:"icon-action"})}),Object(y.jsx)(k.a,{className:"post-votes-value post-votes-value-loading"}),Object(y.jsx)("button",{type:"button",className:"icon-action-button down-vote","aria-label":"Down vote",children:Object(y.jsx)(N.a,{className:"icon-action"})})]}),Object(y.jsxs)("div",{className:"post-container",children:[Object(y.jsx)("h3",{className:"post-title",children:Object(y.jsx)(k.a,{width:L(100,200)})}),Object(y.jsx)("div",{className:"post-image-container",children:Object(y.jsx)(k.a,{height:250})}),Object(y.jsxs)("div",{className:"post-details",children:[Object(y.jsx)("span",{children:Object(y.jsx)(k.a,{width:L(20,50)})}),Object(y.jsx)("span",{children:Object(y.jsx)(k.a,{width:L(50,100)})}),Object(y.jsxs)("span",{className:"post-comments-container",children:[Object(y.jsx)("button",{type:"button",className:"icon-action-button","aria-label":"Show comments",children:Object(y.jsx)(N.e,{className:"icon-action"})}),Object(y.jsx)(k.a,{width:L(10,50)})]})]})]})]})}),E=function(){var e=Object(o.e)(u),t=Object(o.e)(l),c=Object(o.d)(),n=Object(f.c)(e),s=n.data,a=n.error;if(n.isLoading)return Object(y.jsx)(i.a,{animation:"zoom",children:Array(L(3,10)).fill(Object(y.jsx)(M,{}))});if(a)return Object(y.jsx)("div",{className:"error",children:Object(y.jsx)("h2",{children:"Failed to load posts"})});var r=""!==t?s.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())})):s;return c(m(r)),0===r.length?Object(y.jsx)("div",{className:"error",children:Object(y.jsxs)("h2",{children:['No posts matching "',t,'"']})}):Object(y.jsx)("div",{children:r.map((function(e,t){return Object(y.jsx)(q,{post:e,index:t},e.id)}))})},G=c(32),Q=c(33),R=(c(58),function(){var e=Object(n.useState)(""),t=Object(v.a)(e,2),c=t[0],s=t[1],a=Object(o.e)(l),r=Object(o.d)();Object(n.useEffect)((function(){s(a)}),[a]);var i=function(e){e.preventDefault(),r(h(c))};return Object(y.jsxs)("header",{children:[Object(y.jsxs)("div",{className:"logo",children:[Object(y.jsx)(G.a,{className:"logo-icon"}),Object(y.jsxs)("p",{children:["Reddit",Object(y.jsx)("span",{children:"Mini"})]})]}),Object(y.jsxs)("form",{className:"search",onSubmit:i,children:[Object(y.jsx)("input",{type:"text",placeholder:"Search",value:c,onChange:function(e){var t=e.target;s(t.value)},"aria-label":"Search posts"}),Object(y.jsx)("button",{type:"submit",onClick:i,"aria-label":"Search",children:Object(y.jsx)(Q.a,{})})]})]})}),D=(c(59),function(){var e=Object(o.e)(u),t=Object(o.d)(),c=Object(f.d)(),n=c.data,s=c.error,a=c.isLoading;return s?Object(y.jsx)("h2",{children:"Error, unable to fetch subreddits"}):a?Object(y.jsx)("h2",{children:"Loading subreddits..."}):Object(y.jsxs)(T,{className:"subreddit-card",children:[Object(y.jsx)("h2",{children:"Subreddits"}),Object(y.jsx)("ul",{className:"subreddits-list",children:n.map((function(c){return Object(y.jsx)("li",{className:"".concat(e===c.url&&"selected-subreddit"),children:Object(y.jsxs)("button",{type:"button",onClick:function(){return t(O(c.url))},children:[Object(y.jsx)("img",{src:c.icon_img||"https://api.adorable.io/avatars/25/".concat(c.display_name),alt:"".concat(c.display_name),className:"subreddit-icon",style:{border:"3px solid ".concat(c.primary_color)}}),c.display_name]})},c.id)}))})]})});var F,U=function(){return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("header",{children:Object(y.jsx)(R,{})}),Object(y.jsx)("main",{children:Object(y.jsx)(E,{})}),Object(y.jsx)("aside",{children:Object(y.jsx)(D,{})})]})},A=c(20),B=c(7),J=Object(d.a)({reducer:(F={},Object(A.a)(F,f.a.reducerPath,f.a.reducer),Object(A.a)(F,"reddit",p),F),middleware:function(e){return e().concat(f.a.middleware)}});Object(B.e)(J.dispatch);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(o.a,{store:J,children:Object(y.jsx)(U,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[60,1,2]]]);
//# sourceMappingURL=main.9b9afc6e.chunk.js.map